<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base :: layout(~{::title}, ~{::content}, ~{::js_assets})}">
<head>
    <title>Paramètres — GESCOM</title>
    <meta name="_csrf" content="${_csrf.token}" th:content="${_csrf.token}" />
    <meta name="_csrf_header" content="${_csrf.headerName}" th:content="${_csrf.headerName}" />
    <link th:href="@{/css/admin/settings-modern.css}" rel="stylesheet">
</head>
<body>
<div th:fragment="content">
    <div class="container-fluid py-4">
        <!-- En-tête -->
        <div class="row mb-4">
            <div class="col">
                <div class="d-flex align-items-center">
                    <div class="bg-primary bg-opacity-10 rounded-3 p-3 me-3">
                        <i class="fas fa-cogs fa-2x text-primary"></i>
                    </div>
                    <div>
                        <h1 class="mb-1">Paramètres</h1>
                        <p class="text-muted mb-0">Configurez tous les aspects de votre système GESCOM</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Messages d'alerte -->
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show shadow-sm mb-4" role="alert">
            <i class="fas fa-check-circle me-2"></i>
            <span th:text="${successMessage}">Message de succès</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show shadow-sm mb-4" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span th:text="${errorMessage}">Message d'erreur</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Onglets de navigation -->
        <ul class="nav nav-tabs nav-justified mb-4" id="settingsTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab" aria-controls="general" aria-selected="true">
                    <i class="fas fa-cog me-2"></i>
                    Paramètres généraux
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="stock-tab" data-bs-toggle="tab" data-bs-target="#stock" type="button" role="tab" aria-controls="stock" aria-selected="false">
                    <i class="fas fa-boxes me-2"></i>
                    Articles & Stock
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="clients-tab" data-bs-toggle="tab" data-bs-target="#clients" type="button" role="tab" aria-controls="clients" aria-selected="false">
                    <i class="fas fa-users me-2"></i>
                    Clients & Fournisseurs
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="finance-tab" data-bs-toggle="tab" data-bs-target="#finance" type="button" role="tab" aria-controls="finance" aria-selected="false">
                    <i class="fas fa-credit-card me-2"></i>
                    Paramètres financiers
                </button>
            </li>
        </ul>

        <!-- Contenu des onglets -->
        <div class="tab-content" id="settingsTabContent">

            <!-- Onglet Paramètres généraux -->
            <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                <div class="accordion" id="generalSettingsAccordion">
                    <!-- Informations de l'entreprise -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-primary bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-building text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Informations de l'entreprise</h5>
                                        <p class="text-muted mb-0 small">Nom de l'entreprise, adresse, contacts principaux</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-warning me-2">Partiellement configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit me-1"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/admin/settings/company}" method="post">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="companyName" class="form-label">Nom de l'entreprise</label>
                                            <input type="text" class="form-control" id="companyName" name="companyName" value="GESCOM SARL">
                                        </div>
                                        <div class="mb-3">
                                            <label for="companyAddress" class="form-label">Adresse</label>
                                            <textarea class="form-control" id="companyAddress" name="companyAddress" rows="3" placeholder="Adresse complète de l'entreprise"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="companyPhone" class="form-label">Téléphone</label>
                                            <input type="tel" class="form-control" id="companyPhone" name="companyPhone" placeholder="+33 1 23 45 67 89">
                                        </div>
                                        <div class="mb-3">
                                            <label for="companyEmail" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="companyEmail" name="companyEmail" placeholder="contact@gescom.fr">
                                        </div>
                                        <div class="mb-3">
                                            <label for="companyWebsite" class="form-label">Site web</label>
                                            <input type="url" class="form-control" id="companyWebsite" name="companyWebsite" placeholder="https://www.gescom.fr">
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Logo & Identité -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-info bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-palette text-info"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Logo & Identité</h5>
                                        <p class="text-muted mb-0 small">Logo de l'entreprise, couleurs, personnalisation</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-danger me-2">Non configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-success">
                                        <i class="fas fa-upload me-1"></i>
                                        Télécharger
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/admin/settings/branding}" method="post" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="companyLogo" class="form-label">Logo de l'entreprise</label>
                                            <input type="file" class="form-control" id="companyLogo" name="logo" accept="image/*">
                                            <div class="form-text">Formats acceptés: PNG, JPG, SVG (max 2MB)</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="primaryColor" class="form-label">Couleur principale</label>
                                            <input type="color" class="form-control form-control-color" id="primaryColor" name="primaryColor" value="#0d6efd">
                                        </div>
                                        <div class="mb-3">
                                            <label for="secondaryColor" class="form-label">Couleur secondaire</label>
                                            <input type="color" class="form-control form-control-color" id="secondaryColor" name="secondaryColor" value="#6c757d">
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Documents légaux -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-success bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-file-contract text-success"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Documents légaux</h5>
                                        <p class="text-muted mb-0 small">NINEA, RCCM, numéros d'identification</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-danger me-2">Non configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-plus me-1"></i>
                                        Ajouter
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/admin/settings/legal}" method="post">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="ninea" class="form-label">NINEA</label>
                                            <input type="text" class="form-control" id="ninea" name="ninea" placeholder="Numéro NINEA">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="rccm" class="form-label">RCCM</label>
                                            <input type="text" class="form-control" id="rccm" name="rccm" placeholder="Numéro RCCM">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="taxNumber" class="form-label">Numéro fiscal</label>
                                            <input type="text" class="form-control" id="taxNumber" name="taxNumber" placeholder="Numéro d'identification fiscale">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="siret" class="form-label">SIRET</label>
                                            <input type="text" class="form-control" id="siret" name="siret" placeholder="Numéro SIRET">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="vatNumber" class="form-label">TVA Intracommunautaire</label>
                                            <input type="text" class="form-control" id="vatNumber" name="vatNumber" placeholder="FR12345678901">
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Articles & Stock -->
            <div class="tab-pane fade" id="stock" role="tabpanel" aria-labelledby="stock-tab">
                <div class="accordion" id="stockSettingsAccordion">
                    <!-- Configuration des articles -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-warning bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-boxes text-warning"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Configuration des articles</h5>
                                        <p class="text-muted mb-0 small">Paramètres généraux pour la gestion des articles</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-success me-2">Configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit me-1"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/admin/settings/products}" method="post">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="defaultCategory" class="form-label">Catégorie par défaut</label>
                                            <select class="form-select" id="defaultCategory" name="defaultCategory">
                                                <option value="">Sélectionner une catégorie</option>
                                                <option value="general" selected>Général</option>
                                                <option value="electronics">Électronique</option>
                                                <option value="clothing">Vêtements</option>
                                            </select>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="autoSku" name="autoSku" checked>
                                            <label class="form-check-label" for="autoSku">
                                                Génération automatique des SKU
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="stockAlertLevel" class="form-label">Seuil d'alerte stock</label>
                                            <input type="number" class="form-control" id="stockAlertLevel" name="stockAlertLevel" value="10">
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="trackInventory" name="trackInventory" checked>
                                            <label class="form-check-label" for="trackInventory">
                                                Suivi automatique du stock
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Import/Export -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-info bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-exchange-alt text-info"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Import/Export d'articles</h5>
                                        <p class="text-muted mb-0 small">Importez et exportez vos données d'articles</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-success me-2">Configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit me-1"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6">
                                    <h6 class="fw-bold mb-3">
                                        <i class="fas fa-upload me-2 text-success"></i>
                                        Importer des articles
                                    </h6>
                                    <form th:action="@{/admin/products/import}" method="post" enctype="multipart/form-data">
                                        <div class="mb-3">
                                            <label for="importFile" class="form-label">Fichier à importer</label>
                                            <input type="file" class="form-control" id="importFile" name="file" accept=".xlsx,.csv">
                                            <div class="form-text">Formats supportés: Excel (.xlsx), CSV (.csv)</div>
                                        </div>
                                        <button type="submit" class="btn btn-success">
                                            <i class="fas fa-upload me-2"></i>
                                            Importer
                                        </button>
                                    </form>
                                </div>
                                <div class="col-lg-6">
                                    <h6 class="fw-bold mb-3">
                                        <i class="fas fa-download me-2 text-primary"></i>
                                        Exporter des articles
                                    </h6>
                                    <p class="text-muted mb-3">Exportez tous vos articles au format souhaité</p>
                                    <div class="d-flex gap-2">
                                        <a href="/admin/products/export/excel" class="btn btn-primary">
                                            <i class="fas fa-file-excel me-2"></i>
                                            Excel
                                        </a>
                                        <a href="/admin/products/export/csv" class="btn btn-outline-primary">
                                            <i class="fas fa-file-csv me-2"></i>
                                            CSV
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Clients & Fournisseurs -->
            <div class="tab-pane fade" id="clients" role="tabpanel" aria-labelledby="clients-tab">
                <div class="accordion" id="clientsSettingsAccordion">
                    <!-- Configuration des clients -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-primary bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-users text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Configuration des clients</h5>
                                        <p class="text-muted mb-0 small">Paramètres pour la gestion des clients</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-success me-2">Configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit me-1"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/admin/settings/clients}" method="post">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="requireClientCode" name="requireClientCode">
                                            <label class="form-check-label" for="requireClientCode">
                                                Code client obligatoire
                                            </label>
                                        </div>
                                        <div class="mb-3">
                                            <label for="defaultPaymentTerm" class="form-label">Délai de paiement par défaut</label>
                                            <select class="form-select" id="defaultPaymentTerm" name="defaultPaymentTerm">
                                                <option value="0">Comptant</option>
                                                <option value="30" selected>30 jours</option>
                                                <option value="60">60 jours</option>
                                                <option value="90">90 jours</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="autoClientNumber" name="autoClientNumber" checked>
                                            <label class="form-check-label" for="autoClientNumber">
                                                Numérotation automatique des clients
                                            </label>
                                        </div>
                                        <div class="mb-3">
                                            <label for="creditLimit" class="form-label">Limite de crédit par défaut</label>
                                            <input type="number" class="form-control" id="creditLimit" name="creditLimit" value="10000">
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Configuration des fournisseurs -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-secondary bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-truck text-secondary"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Configuration des fournisseurs</h5>
                                        <p class="text-muted mb-0 small">Paramètres pour la gestion des fournisseurs</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-success me-2">Configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit me-1"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/admin/settings/suppliers}" method="post">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="requireSupplierCode" name="requireSupplierCode">
                                            <label class="form-check-label" for="requireSupplierCode">
                                                Code fournisseur obligatoire
                                            </label>
                                        </div>
                                        <div class="mb-3">
                                            <label for="defaultSupplierPaymentTerm" class="form-label">Délai de paiement fournisseur</label>
                                            <select class="form-select" id="defaultSupplierPaymentTerm" name="defaultSupplierPaymentTerm">
                                                <option value="30">30 jours</option>
                                                <option value="45" selected>45 jours</option>
                                                <option value="60">60 jours</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="autoSupplierNumber" name="autoSupplierNumber" checked>
                                            <label class="form-check-label" for="autoSupplierNumber">
                                                Numérotation automatique des fournisseurs
                                            </label>
                                        </div>
                                        <div class="mb-3">
                                            <label for="minOrderAmount" class="form-label">Montant minimum de commande</label>
                                            <input type="number" class="form-control" id="minOrderAmount" name="minOrderAmount" value="100">
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Paramètres financiers -->
            <div class="tab-pane fade" id="finance" role="tabpanel" aria-labelledby="finance-tab">
                <div class="accordion" id="financeSettingsAccordion">
                    <!-- Devises & Fiscalité -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="bg-success bg-opacity-10 rounded-3 p-2 me-3">
                                        <i class="fas fa-coins text-success"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0">Devises & Fiscalité</h5>
                                        <p class="text-muted mb-0 small">Configuration des devises et paramètres fiscaux</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="badge bg-success me-2">Configuré</span>
                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit me-1"></i>
                                        Modifier
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Devise principale -->
                            <h6 class="fw-bold mb-3">
                                <i class="fas fa-dollar-sign me-2 text-primary"></i>
                                Devise principale
                            </h6>
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <strong>CFA</strong> - Devise par défaut du système
                                            <div class="small text-muted">Devise configurée</div>
                                        </div>
                                        <button type="button" class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-edit me-1"></i>
                                            Modifier
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Devises secondaires -->
                            <h6 class="fw-bold mb-3">
                                <i class="fas fa-exchange-alt me-2 text-info"></i>
                                Devises secondaires
                            </h6>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <strong>EUR</strong>
                                                    <div class="small text-muted">1 EUR = 655.957 CFA</div>
                                                </div>
                                                <button type="button" class="btn btn-outline-secondary btn-sm">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <strong>USD</strong>
                                                    <div class="small text-muted">1 USD = 600.000 CFA</div>
                                                </div>
                                                <button type="button" class="btn btn-outline-secondary btn-sm">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card mb-3 border-dashed">
                                        <div class="card-body text-center">
                                            <button type="button" class="btn btn-link text-decoration-none">
                                                <i class="fas fa-plus me-2"></i>
                                                Ajouter une devise
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Paramètres fiscaux -->
                            <hr class="my-4">
                            <h6 class="fw-bold mb-3">
                                <i class="fas fa-calculator me-2 text-warning"></i>
                                Paramètres fiscaux
                            </h6>
                            <form th:action="@{/admin/settings/tax}" method="post">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="defaultTaxRate" class="form-label">Taux de TVA par défaut (%)</label>
                                            <input type="number" class="form-control" id="defaultTaxRate" name="defaultTaxRate" value="18" step="0.01">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="taxNumber" class="form-label">Numéro de TVA</label>
                                            <input type="text" class="form-control" id="taxNumber" name="taxNumber" placeholder="SN123456789">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check mt-4">
                                            <input class="form-check-input" type="checkbox" id="taxInclusive" name="taxInclusive">
                                            <label class="form-check-label" for="taxInclusive">
                                                Prix TTC par défaut
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i>
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<div th:fragment="js_assets">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion des onglets
            const tabButtons = document.querySelectorAll('[data-bs-toggle="tab"]');
            tabButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // Sauvegarde de l'onglet actif dans localStorage
                    localStorage.setItem('activeSettingsTab', this.getAttribute('data-bs-target'));
                });
            });

            // Restauration de l'onglet actif
            const activeTab = localStorage.getItem('activeSettingsTab');
            if (activeTab) {
                const tabButton = document.querySelector(`[data-bs-target="${activeTab}"]`);
                if (tabButton) {
                    const tab = new bootstrap.Tab(tabButton);
                    tab.show();
                }
            }

            // Gestion des boutons d'action
            document.querySelectorAll('.btn-outline-primary, .btn-outline-success').forEach(button => {
                button.addEventListener('click', function() {
                    const card = this.closest('.card');
                    const cardTitle = card.querySelector('h5').textContent;
                    
                    // Ici vous pouvez implémenter la logique spécifique pour chaque action
                    console.log(`Action demandée pour: ${cardTitle}`);
                    
                    // Exemple: ouvrir un modal ou rediriger vers une page de configuration
                    if (this.classList.contains('btn-outline-primary')) {
                        // Logique pour modifier
                        alert(`Modification de: ${cardTitle}`);
                    } else if (this.classList.contains('btn-outline-success')) {
                        // Logique pour télécharger
                        const fileInput = card.querySelector('input[type="file"]');
                        if (fileInput) fileInput.click();
                    }
                });
            });

            // Gestion du changement de couleur en temps réel
            document.querySelectorAll('input[type="color"]').forEach(input => {
                input.addEventListener('change', function() {
                    // Aperçu en temps réel des changements de couleur
                    console.log(`Nouvelle couleur: ${this.value}`);
                });
            });

            // Validation des formulaires
            document.querySelectorAll('form').forEach(form => {
                form.addEventListener('submit', function(e) {
                    // Ici vous pouvez ajouter des validations personnalisées
                    console.log('Soumission du formulaire:', this.action);
                });
            });
        });
    </script>
</div>
</body>
</html>